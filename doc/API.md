# The basic API

All the resources of interest to the library user (i.e., the programmer) are under the root package `protypo.API`; the main procedures are in `Protypo.API.Interpreter`  whose public part is

```
package Protypo.API.Interpreter is
   type Compiled_Code is limited private;

   function Compile (Program  : String;
                     Base_Dir : String := "") return Compiled_Code;

   procedure Run (Program      : Compiled_Code;
                  Symbol_Table : Symbols.Table;
                  Consumer     : in out Consumers.Consumer_Interface'Class);

   procedure Run (Program      : String;
                  Symbol_Table : Symbols.Table;
                  Consumer     : in out Consumers.Consumer_Interface'Class);

   procedure Expand_Template (Template        : String;
                              Symbol_Table    : Symbols.Table;
                              Target_Filenane : String);
private
  -- something
end Protypo.API.Interpreter;
```
The first function
```
function Compile (Program  : String;
                  Base_Dir : String := "") return Compiled_Code;
```
returns an internally compiled version of the program given as the first argument.  The `Base_Dir` argument is used, for example, when searching for files to be included. By default the current directory of the program is used.

The compiled code can be run using the procedure
```
   procedure Run (Program      : Compiled_Code;
                  Symbol_Table : Symbols.Table;
                  Consumer     : in out Consumers.Consumer_Interface'Class);
```
`Symbol_Table` is a table filled with pre-defined variables and functions.  Consumer is a handler that will receive the strings generated by the running program.
